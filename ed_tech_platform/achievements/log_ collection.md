# ログ収集基盤
## 課題
以下の様に、元々のアプリケーションログを収集していただけので有効に活用できていなかった状態でした。

* アプリケーションログに必要な情報が整理されていない。情報が足りない。
* Rails標準のログが解析し難い。
* Railsのログ出力処理の知見を持っているメンバーがいなかった。
* データ活用するメンバーが主に企画部署だったため、エンジニアが使うケースが無かった為対応したいエンジニアが出てこなかった。

## やったこと
SREと共に調査、分析に有効に利用できる様に改善しました。

Rails/SidekiqのログをカスタマイズしRailsログのJson化及びログ出力内容のカスタマイズを実施し知見共有を行いました。
それにより、AWS Glueでのパース処理が不要かつ、出力要素がいくら増えても自動でAWS Athena用テーブルへのマッピングが可能になりました。
また、社内でカスタムログを出力する時の必須項目、項目名の統一などガイドラインの作成と普及を行いました。

## 構成
* fruentd
* AWS kinesis
* AWS kinesis Stream
* AWS Glue
* AWS Athenaで分析

## その後
分析用のログ出力が簡単に出せるかつ、ガイドラインが整備された事で様々なプロダクトで活用され、データ活用が促進されました。